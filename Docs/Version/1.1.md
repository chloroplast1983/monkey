# 1.1

## 概述

* 添加针对后端服务层返回的`e-tag`实现本地缓存机制, 减少传输数据请求, 使用`304`状态码.
	* 优点: 减少数据传输, `304`不在传输数据.
	* 缺点: 每次依然会发送请求, 后端依然会取出数据匹配.
* 添加针对后端服务层返回数据, 实现基于`ttl`缓存.
	* 优点: 不会再向后端服务层发起请求.
	* 缺点: 数据更新有延迟, 比如设定`5`分钟, 则`5`分钟后才会再次发送请求更新数据.
* 添加针对用户`session`缓存.
	* 优点: 每次不会向后端发送链接请求用户数据.
	* 缺点: 用户数据需要有5分钟(可以设定)延迟更新.
		* 如果前端主动编辑用户信息更新, 可以在提交成功后清空`session`即可.
		* 如果是后端主动修改用户信息, 则只能通过**事件**驱动更新.

### etag

每次都发起请求, 但是携带`eta`, 每次都会和后端检查`etag`标记. 如果`etag`没过期,  后端服务层返回`304`. 否则返回其他状态码.

**应用场景**, 频繁会更新的数据. 每次都会向后端发起请求. 减少不必要的数据传输.

### TTL

时间`ttl`级别, 设定缓存有效时间. 即在一段时间**只要**缓存存在数据, 就不会再像后端发起请求. 当超出时间后, 像后端请求数据. 首先还是会检测`etag`, 如果`etag`相同则只是更新过期时间, 否则更新缓存.

**应用场景**, 不频繁会更新的数据. 会一段时间后才会发起请求, 减少不必要的数据请求.


